# 경계간 매핑하기
각 계층의 모델 매핑 전략의 장단점

### 1. 매핑하지 않기
 - 웹 컨트롤러 -> SendMoneyUserCase 이 과정에서 Account를 인자로 사용하고 영속성 계층에서도 마찬가지
 - 모든 계층에서 같은 모델을 사용하니 매핑할 필요가 없음

#### 단점
 - 웹 계층에서 모델을 REST로 노출시켰다면? 직렬화를 위한 Annotation이 필요
 - ORM을 사용한다면? 데이터베이스 매핑을 위한 특정 Annotation이 필요(@Id, @Column, @ManyToOne)

> Account는 웹, 애플리케이션, 영속성 계층과 관련된 이유로 변경되어야 하며 **단일 책임 원칙 위배**

#### 장점
 - 간단한 CRUD 유스케이스라면? 같은 필드를 가진 웹 모델을 도메인으로 혹은 도메인 모델을 영속성 모델로 매핑할 필요가 없음

> 모든 계층이 정확히 같은 구조의, 정확히 같은 정보를 필요로 한다면 매핑하지 않기 전략이 좋을수도 있음

개인적으로 모든 계층이 같은 구조를 가진다 하더라도 웹 계층에선 UI를 다루기 때문에 매핑하지 않기는 지양하는것이 바람직하다고 생각됨

### 2. 양방향 매핑 전략
웹 계층에서는 웹 모델을 인커밍 포트에서 필요한 도메인 모델로 매핑, 영속성 계층에서는 아웃고잉 포트가 사용하는 도메인 모델과 영속성 모델간의 매핑

#### 장점
- 각 계층이 전용 모델을 가지고 있기 때문에 전용 모델을 변경하더라도 다른 계층에 영향이 없음
> 단일 책임 원칙 만족!

#### 단점
- 보일러플레이트 코드가 많이 생김
- 도메인 모델이 계층을 넘어 통신하는데 사용되고 있음

### 3. 완전 매핑 전략
각 연산마다 입출력 모델을 사용. 

#### 단점
- 더 많은 코드가 필요

#### 장점
- 웹 계층과 애플리케이션 계층 사이에서 상태변경 유스케이스의 경계를 명확하게 할때 좋음

### 4. 단방향 매핑 전략
모든 계층의 모델들이 같은 인터페이스를 구현한다.  
한 계층이 다른 계층으로부터 객체를 받으면 해당 계층에서 이용할수 있도록 다른 무언가로 매핑하는 것

#### 장점
- 도메인 객체를 바깥 계층으로 전달할때 매핑이 필요없다. 도메인 객체가 인커밍/아웃고잉 포트가 기대하는대로 인터페이스를 구현하고 있기 때문

#### 단점
- 개념적으로 어려움..

