# 의존성 역전하기

### 단일 책임 원칙

> 하나의 컴포넌트는 오로지 한 가지 일만 해야하고, 그것을 올바르게 수행해야한다.
> 컴포넌트를 변경하는 이유는 오직 하나뿐이여야 한다.


<img width=60% src="https://user-images.githubusercontent.com/24540286/152789049-476a0af3-bac3-4277-9e28-9edc15d33b6c.png"/>


위 그림에서 A는 여러 컴포넌트에 의존하고 있고 E는 의존하는 것이 전혀 없다.

E를 변형할 이유는 E의 기능의 바뀔때 뿐이다. 반면에 A는 다른 어떤 컴포넌트가 바뀌던지 바뀌어야 한다.

### 의존성 역전 원칙

> 코드상의 어떤 의존성이든 그 방향을 바꿀 수(역전시킬 수) 있다.

**사실 양쪽 코드를 모두 제어할 수 있는 경우에만 역전시킬수 있다.** 서드파티 라이브러를 사용할 경우 라이브러리를 제어할 수 없기 때문에 역전시킬수 없다.


### 클린 아키텍쳐
**도메인 코드가 바깥으로 향하는 어떤 의존성도 없어야 한다.**

<img width=70% src="https://user-images.githubusercontent.com/24540286/152791153-aaa284a5-0acb-457e-ace7-e74afd23f59a.png"/>

- 계층간의 모든 의존성은 안쪽을 향한다
- 도메인 코드에서 어떤 영속성 프레임워크나 UI가 사용되는지 알수 없다.

### 육각형 아키텍쳐

<img width=70% src = "https://user-images.githubusercontent.com/24540286/152792110-bdee0590-458a-47a6-867f-9905ca9306b4.png">

- 육각형 안에는 도메인 엔티티와 상호작용하는 유스케이스가 있다.
- 육각형 바깥에는 애플리케이션과 상호작용하는 다양한 어댑터들이 있다.
- 왼쪽에 있는 어댑터들은 (코어를 호출하기 때문에) 애플리케이션을 주도한다.
- 오른쪽에 있는 어댑터는 (코어에 의해 호출되기 때문에) 애플리케이션에 의해 주도되는 어댑터이다.

코어와 어댑터가 통신하기 위해서는 포트가 필요하다.
주도하는 어댑터(왼쪽)는 포트가 유스케이스에 의해 구현되고 호출되며 주도되는 어댑터(오른쪽)은 포트가 어댑터에 의해 구현되고 코어에 의해 호출된다.
